{
  "name": "SiriusDV - Main Assistant Workflow",
  "description": "–ü–æ–ª–Ω—ã–π workflow: Telegram ‚Üí Scraping ‚Üí Calculator ‚Üí AI Chat ‚Üí –û—Ç–≤–µ—Ç",
  "nodes": [
    {
      "displayName": "Webhook",
      "name": "webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [250, 300],
      "webhookId": "sirius-assistant",
      "requestMethod": "POST"
    },
    {
      "displayName": "Code - Extract Request",
      "name": "codeExtractRequest",
      "type": "n8n-nodes-base.code",
      "typeVersion": 1,
      "position": [450, 300],
      "parameters": {
        "jsCode": "const body = $input.all()[0].json.body || $input.all()[0].json;\nreturn [{\n  json: {\n    message: body.message,\n    user_id: body.user_id || 'anonymous',\n    chatInput: body.message\n  }\n}];"
      }
    },
    {
      "displayName": "AI Chat Model",
      "name": "aiChat",
      "type": "n8n-nodes-base.openai",
      "typeVersion": 1,
      "position": [650, 300],
      "parameters": {
        "resource": "chat",
        "model": "meta-llama/llama-4-maverick",
        "prompt": "{{ $json.chatInput }}",
        "systemMessage": "–¢—ã AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç SiriusDV. –ü–æ–º–æ–≥–∞–µ—à—å –Ω–∞–π—Ç–∏ –∞–≤—Ç–æ –∏–∑ –Ø–ø–æ–Ω–∏–∏/–ö–æ—Ä–µ–∏. –û—Ç–≤–µ—á–∞–π –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ, —á–µ—Å—Ç–Ω–æ –æ —Ü–µ–Ω–∞—Ö –∏ –∫–æ–º–∏—Å—Å–∏—è—Ö."
      }
    },
    {
      "displayName": "Response",
      "name": "response",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [850, 300],
      "parameters": {
        "responseCode": 200,
        "responseBody": "{{ $json.choices[0].message.content }}"
      }
    },
    {
      "displayName": "Telegram - Send to Managers",
      "name": "telegramManager",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [850, 450],
      "parameters": {
        "operation": "sendMessage",
        "chatId": "-YOUR_MANAGER_CHAT_ID",
        "text": "üî• –ù–û–í–´–ô –ó–ê–ü–†–û–°\\n–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {{ $json.user_id }}\\n–ó–∞–ø—Ä–æ—Å: {{ $json.message }}"
      }
    }
  ],
  "connections": {
    "Webhook": { "main": [[ { "node": "Code - Extract Request", "branch": 0, "index": 0 } ]] },
    "Code - Extract Request": { "main": [[ { "node": "AI Chat Model", "branch": 0, "index": 0 } ]] },
    "AI Chat Model": { "main": [[ 
      { "node": "Response", "branch": 0, "index": 0 },
      { "node": "Telegram - Send to Managers", "branch": 0, "index": 0 }
    ]] }
  }
}
